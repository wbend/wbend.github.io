<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Film Recommendations</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    
    <style>
        /* Existing styles remain the same, adding new tab styles */
        .tabs {
            display: flex;
            border-bottom: 2px solid #3498db;
            margin-bottom: 30px;
            gap: 4px;
        }

        .tab {
            padding: 12px 24px;
            background: #f8f9fa;
            border: none;
            border-radius: 8px 8px 0 0;
            cursor: pointer;
            font-size: 1em;
            color: #2c3e50;
            transition: all 0.2s ease;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: #3498db;
            color: white;
            font-weight: 500;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 600px) {
            .tabs {
                flex-direction: column;
                gap: 2px;
                border-bottom: none;
            }

            .tab {
                border-radius: 4px;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Film Recommendations</h1>

        <div class="tabs">
            <button class="tab active" onclick="openTab('discover')">Discover Films</button>
            <button class="tab" onclick="openTab('add')">Add New Film</button>
            <button class="tab" onclick="openTab('rate')">Rate & Archive</button>
            <button class="tab" onclick="openTab('watched')">Watched Films</button>
        </div>

        <!-- Discover Tab -->
        <div id="discover" class="tab-content active">
            <div class="button-container">
                <button onclick="recommendRandom()">Random Film</button>
                <select id="genreSelect" onchange="recommendByGenre()" class="mobile-friendly-select">
                    <option value="">Select Genre</option>
                </select>
            </div>
            <div id="recommendedMovie"></div>
        </div>

        <!-- Add Film Tab -->
        <div id="add" class="tab-content">
            <form class="add-movie-form" onsubmit="addMovie(event)">
                <div class="form-grid">
                    <input type="text" id="title" placeholder="Title" required class="mobile-friendly-input">
                    <input type="text" id="director" placeholder="Director" class="mobile-friendly-input">
                    <input type="number" id="year" placeholder="Year" class="mobile-friendly-input">
                    <div class="genre-input-container">
                        <input type="text" id="genre" class="genre-input mobile-friendly-input" placeholder="Enter or select genre" required>
                        <div class="genre-suggestions" id="genreSuggestions"></div>
                    </div>
                </div>
                <button type="submit">Add Film</button>
            </form>
            <div id="addSuccess" class="success-message"></div>
            <div id="addError" class="error-message"></div>
        </div>

        <!-- Rate & Archive Tab -->
        <div id="rate" class="tab-content">
            <div class="search-container">
                <input type="text" id="movieSearch" class="search-input mobile-friendly-input" placeholder="Search for a film or add new...">
                <div id="searchResults" class="search-results"></div>
            </div>
            <div id="ratingOptions" style="display: none;">
                <div class="star-rating">
                    <span onclick="rateMovie(1)">★</span>
                    <span onclick="rateMovie(2)">★</span>
                    <span onclick="rateMovie(3)">★</span>
                    <span onclick="rateMovie(4)">★</span>
                    <span onclick="rateMovie(5)">★</span>
                </div>
            </div>
            <div id="rateSuccess" class="success-message"></div>
            <div id="rateError" class="error-message"></div>
        </div>

        <!-- Watched Movies Tab -->
        <div id="watched" class="tab-content">
            <button onclick="loadWatchedMovies()" class="secondary-button">Refresh Watched Movies</button>
            <div id="watchedMovies" class="watched-movies-container"></div>
        </div>
    </div>

    <script>
        // Add this new tab functionality to your existing JavaScript
        function openTab(tabName) {
            // Hide all tab content
            const tabContents = document.getElementsByClassName('tab-content');
            for (let content of tabContents) {
                content.classList.remove('active');
            }
            
            // Deactivate all tabs
            const tabs = document.getElementsByClassName('tab');
            for (let tab of tabs) {
                tab.classList.remove('active');
            }
            
            // Show the selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Activate the clicked tab
            event.currentTarget.classList.add('active');
            
            // Special handling for watched movies tab
            if (tabName === 'watched') {
                loadWatchedMovies();
            }
        }
    </script>
    
    <!-- Your existing app.js -->
    <script src="app.js"></script>
</body>
</html>